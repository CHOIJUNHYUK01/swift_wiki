# 클래스와 구조체 비교

> 가장 큰 차이는 '상속'이라는 것만 일단 알고 진행하자

### 초기화

> 구조체와 클래스는 모두 초기화를 해줘야 실질적인 데이터 역할이 가능해진다.

```swift
class Dog {
    var name: String
    var weight: Double

    init(name: String, weight: Double) {
        self.name = name
        self.weight = weight
    }
}
```

`init`으로 초기화를 하는 메서드를 구현해야 한다.
해당 메서드를 사용해, 인스턴스를 생성한다.

초기화 메서드 실행의 목적은 모든 저장 속성 초기화를 통한 인스턴스 생성이다.
즉, 모든 저장 속성에 값이 저장되어야 생성이 완료된다는 뜻이다.

#### 멤버와이즈 이니셜라이즈

> 구조체는 클래스와 다르게 초기화 함수를 적지 않으면, 인스턴스를 생성할 때 자동으로 가지고 있는 속성을 초기화해주는 초기화 함수를 지원한다.

```swift
struct Dog {
    var name: String
    var weight: Double
}

var bori = Dog(name: "", weight: 0.0)
```

### 사용 이유

1. 사용하려는 모델을 설계한다.
2. 애플이 미리 설계해 놓은 클래스/구조체를 잘 사용하기 위함이다. (프레임 워크)

### 객체 지향 특징

1. 추상화

   사용하려는 데이터에서 공통된 특성을 뽑아내 속성과 메서드를 정의하는 것 (모델링 한다는 것)

2. 캡슐화

   연관이 있는 데이터를 하나의 클래스 혹은 구조체 타입으로 묶어 정의하는 것

3. 상속성 (구조체는 뺴고)

   자식 클래스가 부모 클래스에서 정의한 속성이나 메서드를 사용할 수 있다는 것

4. 다형성

   하나의 객체가 여러 타입의 형태로 저장될 수 있다는 것 (다운캐스팅, 업캐스팅)

### 속성에도 종류가 있다

1. 저장 속성

   기본 속성이다.

2. 지연 저장 속성

   `lazy` 키워드를 붙이고, 값이 없을 때는 `nil`이 할당되기 때문에 항상 `var`로 선언되어야 한다.
   해당 속성은 메모리에 당장 올라가진 않고, 사용할 떄 올라간다.

   다른 저장 속성을 사용해야 할 때 사용한다.
   아니면, 계산하는 데 메모리르 꽤 잡아먹을 것 같을 때도 사용한다.

```swift
class Dog {
    var name = "강아지"
    lazy var nameLength = self.name.count
}
```

3. 타입 속성

   타입 자체에 대한 속성이다.
   인스턴스에서 접근은 불가능하다.
   전역 변수와 같이 데이터 영역에 존재한다.

4. 속성 감시자

   타입이 바뀌는 타이밍을 알 수 있다.
   이제 곧 바뀔 건지 (willSet), 이미 바뀌었는지 (didSet)

5. 계산 속성

   속성 형태를 가진 실질적 메서드다.
   `get`블록은 필수 구현 요소고, `set`블록은 선택이다.

### 메서드에도 종류가 있다.

1. 인스턴스 메서드

   인스턴스에는 메모리 공간이 포함되어 있지 않다.
   그렇지만, 접근할 때는 인스턴스에서 접근해야 한다.

   구조체에서는 특성이 하나 있다.
   자기가 가진 속성 값을 변경시켜야 한다면, `mutating` 키워드를 붙여야 한다.

```swift
struct Dog {
    var name = "강아지"

    mutating func changeName(_ a: String) {
        self.name = a
    }
}
```

2. 타입 메서드

   타입에 해당하는 보편적인 동작의 경우다.
   해당 메서드를 상속하려면, `static` 대신에 `class` 키워드를 사용하면 된다.

3. 서브스크립트

   대괄호를 사용해 메서드를 사용해 나온 값을 반환한다.
   계산 속성과 동일하게 `get`은 필수, `set`은 선택이다.
   타입 서브스크립트도 구현 가능하다.

4. 생성자

- 구조체에만 존재하는 멤버와이즈 생성자

- 클래스에만 존재하는 편의 생성자

- 클래스에만 존재하는 필수 생성자

- 지정생성자

- 실패가능생성자

5. 소멸자

> 클래스에서만 존재함

### 싱글톤 패턴

```swift
class DataManager {
    static let shared = DataManager()

    var userInfoId = 12345

    private init() {}
}
```

위와 같이 생성해 사용한다.
`private init()`을 사용해 외부에서는 새로운 객체 생성을 막는다.
